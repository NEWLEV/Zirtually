import{r,b as _,F as q,j as e,G as M,B as m,H as A,C as n,p as L,J as $}from"./index-BhnCGazT.js";import{M as F}from"./Modal-Bjrg86Tx.js";const U=({user:a})=>{var y,N,v,k,w,D,S,O;const[d,C]=r.useState(_),[R,i]=r.useState(!1),[l,T]=r.useState("pto"),[c,p]=r.useState(""),[x,u]=r.useState(""),[j,f]=r.useState(""),o={pto:{used:((y=a.timeOffBalance)==null?void 0:y.used.pto)||0,total:((N=a.timeOffBalance)==null?void 0:N.pto)||0,label:"PTO Days"},sick:{used:((v=a.timeOffBalance)==null?void 0:v.used.sick)||0,total:((k=a.timeOffBalance)==null?void 0:k.sick)||0,label:"Sick Days"},personal:{used:((w=a.timeOffBalance)==null?void 0:w.used.personal)||0,total:((D=a.timeOffBalance)==null?void 0:D.personal)||0,label:"Personal Days"},bereavement:{used:((S=a.timeOffBalance)==null?void 0:S.used.bereavement)||0,total:((O=a.timeOffBalance)==null?void 0:O.bereavement)||0,label:"Bereavement"}},B=t=>{switch(t){case"approved":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"pending":return"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400";case"rejected":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400";default:return"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-400"}},g=t=>{switch(t){case"vacation":return"ðŸ–ï¸";case"sick":return"ðŸ¥";case"personal":return"ðŸ ";case"bereavement":return"ðŸ’";case"parental":return"ðŸ‘¶";case"jury_duty":return"âš–ï¸";case"military":return"ðŸŽ–ï¸";default:return"ðŸ“…"}},h=d.filter(t=>t.status==="pending"),b=d.filter(t=>t.status==="approved"&&new Date(t.startDate)>new Date),{logAction:E}=q(),I=()=>{const t=Math.ceil((new Date(x).getTime()-new Date(c).getTime())/864e5)+1,s={id:Date.now().toString(),employeeId:a.id,type:l,startDate:c,endDate:x,totalDays:t,status:"pending",notes:j,requestedAt:new Date().toISOString()};C([s,...d]),E(a,"REQUEST_TIME_OFF","hr",`Requested ${t} days of ${l}`,"success",`Request ID: ${s.id}`),i(!1),p(""),u(""),f("")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl text-white",children:e.jsx(M,{className:"w-6 h-6"})}),"Time Off"]}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-1",children:"Manage your time off requests and balances"})]}),e.jsx(m,{onClick:()=>i(!0),icon:e.jsx(A,{className:"w-4 h-4"}),children:"New Request"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(o).map(([t,s])=>e.jsxs(n,{variant:"glass",padding:"md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-2xl",children:g(t)}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400",children:s.label})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s.total-s.used}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-slate-400",children:["/ ",s.total," days"]})]}),e.jsx("div",{className:"mt-2 h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-violet-500 rounded-full transition-all",style:{width:`${(s.total-s.used)/s.total*100}%`}})})]},t))}),h.length>0&&e.jsx(n,{variant:"elevated",className:"border-l-4 border-l-amber-500",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-xl",children:e.jsx("span",{className:"text-2xl",children:"â³"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:[h.length," Pending Request",h.length>1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Awaiting manager approval"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs(n,{variant:"bordered",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Your Requests"}),e.jsxs("div",{className:"space-y-3",children:[d.slice(0,10).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-2xl",children:g(t.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:t.type.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:[new Date(t.startDate).toLocaleDateString()," -"," ",new Date(t.endDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-slate-400",children:[t.totalDays," day",t.totalDays>1?"s":""]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${B(t.status)}`,children:t.status})]})]},t.id)),d.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"ðŸ“…"}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:"No time off requests yet"}),e.jsx(m,{variant:"secondary",className:"mt-4",onClick:()=>i(!0),children:"Create Your First Request"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[b.length>0&&e.jsxs(n,{variant:"glass",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-green-500"}),"Upcoming Time Off"]}),e.jsx("div",{className:"space-y-3",children:b.slice(0,3).map(t=>e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:t.type.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:[new Date(t.startDate).toLocaleDateString()," (",t.totalDays," days)"]})]},t.id))})]}),e.jsxs(n,{variant:"bordered",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Company Holidays"}),e.jsx("div",{className:"space-y-3",children:$.slice(0,5).map(t=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ‰"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]})},t.id))})]}),e.jsxs(n,{variant:"glass",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Policy Highlights"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-slate-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),"Requests should be submitted 2+ weeks in advance"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),"Unused vacation days roll over (max 5 days)"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),"Sick days require documentation after 3 consecutive days"]})]})]})]})]}),e.jsx(F,{isOpen:R,onClose:()=>i(!1),title:"Request Time Off",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2",children:"Type of Leave"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["pto","sick","personal","bereavement"].map(t=>e.jsxs("button",{onClick:()=>T(t),className:`flex items-center gap-2 p-3 rounded-xl border transition-colors ${l===t?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-slate-700 hover:border-gray-300 dark:hover:border-slate-600"}`,children:[e.jsx("span",{className:"text-xl",children:g(t)}),e.jsx("span",{className:`font-medium capitalize ${l===t?"text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-slate-300"}`,children:t.replace("_"," ")})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:c,onChange:t=>p(t.target.value),className:"w-full px-4 py-2 bg-gray-100 dark:bg-slate-700 rounded-xl text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:x,onChange:t=>u(t.target.value),min:c,className:"w-full px-4 py-2 bg-gray-100 dark:bg-slate-700 rounded-xl text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:j,onChange:t=>f(t.target.value),placeholder:"Add any additional details...",className:"w-full px-4 py-3 bg-gray-100 dark:bg-slate-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 outline-none focus:ring-2 focus:ring-indigo-500 resize-none",rows:3})]}),l&&o[l]&&e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-800 rounded-xl",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-slate-400",children:["Available balance:"," ",e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[o[l].total-o[l].used," ","days"]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(m,{variant:"secondary",className:"flex-1",onClick:()=>i(!1),children:"Cancel"}),e.jsx(m,{className:"flex-1",onClick:I,disabled:!c||!x,children:"Submit Request"})]})]})})]})};export{U as default};
