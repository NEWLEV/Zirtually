import{u as H,r as l,i as W,k as K,U as p,T as d,j as e,C as N,d as _,B as v,l as L}from"./index-BhnCGazT.js";import{P as q}from"./ProgressBar-B3LiunaO.js";import{M as U}from"./Modal-Bjrg86Tx.js";import{B as G}from"./Breadcrumbs-oO1jVnSr.js";const z=({priority:t})=>{const c={High:"bg-rose-100 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300",Medium:"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300",Low:"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300"};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${c[t]}`,children:t})},V=(t,c)=>{if(c===d.DONE)return null;const m=new Date;m.setHours(0,0,0,0);const n=new Date(t),x=Math.ceil((n.getTime()-m.getTime())/(1e3*60*60*24));return x<0?{text:"Overdue",class:"text-rose-600 dark:text-rose-400"}:x<=3?{text:`${x}d left`,class:"text-amber-600 dark:text-amber-400"}:{text:n.toLocaleDateString("en-US",{month:"short",day:"numeric"}),class:"text-gray-500 dark:text-slate-400"}},X=({user:t,setActiveView:c})=>{const{config:m}=H(),[n,x]=l.useState(W),[k,T]=l.useState(K),[S,h]=l.useState(!1),[o,w]=l.useState(null),[O,C]=l.useState(!1),[b,A]=l.useState("default"),[f,E]=l.useState("all"),i=t.role===p.MANAGER||t.role===p.ADMIN?n:n.filter(r=>r.assignedTo===t.id),P=l.useMemo(()=>{const r=new Set(i.map(s=>s.category));return["all",...Array.from(r)]},[i]),D=l.useMemo(()=>{let r=f==="all"?i:i.filter(a=>a.category===f);const s={High:1,Medium:2,Low:3};return b==="dueDate"?r=[...r].sort((a,u)=>new Date(a.dueDate).getTime()-new Date(u.dueDate).getTime()):b==="priority"&&(r=[...r].sort((a,u)=>s[a.priority]-s[u.priority])),r},[i,f,b]),M=i.filter(r=>r.status===d.DONE).length,j=i.length,g=j>0?M/j*100:0,y=k.filter(r=>r.required&&!r.acknowledged).length,B=r=>{x(n.map(s=>{if(s.id===r){const a=s.status===d.DONE?d.TODO:d.DONE;return L(t,a===d.DONE?"COMPLETE_TASK":"UNCOMPLETE_TASK",`Task: "${s.title}"`),{...s,status:a}}return s}))},$=r=>{w(r),h(!0),C(!1)},I=()=>{o&&(T(k.map(r=>r.id===o.id?{...r,acknowledged:!0}:r)),L(t,"ACKNOWLEDGE_POLICY",`Acknowledged: "${o.title}"`)),h(!1),w(null)},R=()=>g>=75?"from-status-success to-action-primary":g>=50?"from-action-secondary to-focus-ring":g>=25?"from-status-warning to-status-warning/80":"from-status-error to-status-error/80";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(G,{items:[{label:"Work"},{label:"Onboarding"}],setActiveView:c}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Onboarding"}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-1",children:t.isNewHire?"Welcome! Let's get you set up and ready to go.":`Manage onboarding tasks for your ${m.terminology.employees.toLowerCase()}.`})]})}),t.isNewHire&&y>0&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Action Required"}),e.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-300",children:["You have ",y," required"," ",y===1?"policy":"policies"," to review."]})]})]}),e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.isNewHire?"Your Onboarding Progress":"Team Onboarding Progress"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:[M," of ",j," tasks completed"]}),e.jsx("div",{className:"mt-4",children:e.jsx(q,{progress:g,variant:"gradient",className:"h-3"})})]}),e.jsx("div",{className:"flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-slate-700 dark:to-slate-800",children:e.jsx("div",{className:`flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ${R()} shadow-lg`,children:e.jsxs("span",{className:"text-xl font-bold text-text-inverse",children:[Math.round(g),"%"]})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(N,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tasks"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("select",{value:f,onChange:r=>E(r.target.value),className:"text-sm bg-bg-secondary dark:bg-dark-card border border-border-medium dark:border-dark-border rounded-lg px-3 py-2 focus:ring-2 focus:ring-focus-ring outline-none",children:P.map(r=>e.jsx("option",{value:r,children:r==="all"?"All Categories":r},r))}),e.jsxs("select",{value:b,onChange:r=>A(r.target.value),className:"text-sm bg-bg-secondary dark:bg-dark-card border border-border-medium dark:border-dark-border rounded-lg px-3 py-2 focus:ring-2 focus:ring-focus-ring outline-none",children:[e.jsx("option",{value:"default",children:"Default Order"}),e.jsx("option",{value:"dueDate",children:"Due Date"}),e.jsx("option",{value:"priority",children:"Priority"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[D.map(r=>{const s=V(r.dueDate,r.status),a=_.find(u=>u.id===r.assignedTo);return e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border transition-all ${r.status===d.DONE?"bg-bg-secondary dark:bg-dark-card/50 border-border-light dark:border-dark-border opacity-60":"bg-bg-elevated dark:bg-dark-card border-border-medium dark:border-dark-border hover:border-action-secondary dark:hover:border-action-secondary"}`,children:[e.jsx("button",{onClick:()=>B(r.id),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${r.status===d.DONE?"bg-emerald-500 border-emerald-500":"border-gray-300 dark:border-slate-600 hover:border-emerald-500"}`,children:r.status===d.DONE&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-medium ${r.status===d.DONE?"line-through text-gray-500":"text-gray-900 dark:text-white"}`,children:r.title}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded-full",children:r.category})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm",children:[s&&e.jsx("span",{className:s.class,children:s.text}),e.jsxs("span",{className:"text-gray-400 dark:text-slate-500",children:["~",r.estimatedTime,"h"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{priority:r.priority}),[p.MANAGER,p.ADMIN].includes(t.role)&&a&&e.jsx("img",{src:a.avatarUrl,alt:a.name,title:`Assigned to ${a.name}`,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-slate-800"})]})]},r.id)}),D.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-slate-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No tasks found."})]})]})]})}),e.jsx("div",{children:e.jsxs(N,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Policy Acknowledgment"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mb-6",children:"Please review and acknowledge the following policies."}),e.jsx("div",{className:"space-y-3",children:k.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50 dark:bg-slate-700/50 border border-gray-100 dark:border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r.acknowledged?"bg-emerald-100 dark:bg-emerald-900/50":"bg-gray-200 dark:bg-slate-600"}`,children:r.acknowledged?e.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:r.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:[r.required?"Required":"Optional"," â€¢ ",r.version]})]})]}),r.acknowledged?e.jsx("span",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:"Done"}):e.jsx(v,{variant:"secondary",size:"sm",onClick:()=>$(r),children:"Review"})]},r.id))})]})})]}),e.jsx(U,{isOpen:S,onClose:()=>h(!1),title:(o==null?void 0:o.title)||"",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"max-h-60 overflow-y-auto p-4 bg-gray-50 dark:bg-slate-700/50 rounded-xl text-sm text-gray-600 dark:text-slate-300",children:[e.jsxs("p",{children:["This document outlines the procedures and expectations regarding this policy. All"," ",m.terminology.employees.toLowerCase()," are required to read and understand this policy thoroughly."]}),e.jsx("p",{className:"mt-4",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor."}),e.jsx("p",{className:"mt-4",children:"Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi."})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 bg-action-primary/5 dark:bg-action-primary/10 rounded-xl cursor-pointer border border-action-primary/10",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:r=>C(r.target.checked),className:"w-5 h-5 mt-0.5 rounded border-border-medium text-action-primary focus:ring-focus-ring"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-slate-300",children:"I confirm that I have read, understood, and agree to abide by this policy."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(v,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(v,{variant:"primary",onClick:I,disabled:!O,children:"Acknowledge"})]})]})})]})};export{X as default};
