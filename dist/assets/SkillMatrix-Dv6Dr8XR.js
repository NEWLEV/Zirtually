import{r as c,w as n,x,j as e,C as l,I as i,B as m}from"./index-BhnCGazT.js";import{M as $}from"./Modal-Bjrg86Tx.js";import{B as E}from"./Breadcrumbs-oO1jVnSr.js";const D=({user:w,setActiveView:C})=>{const[p,A]=c.useState("matrix"),[b,I]=c.useState("all"),[o,y]=c.useState(null),[j,S]=c.useState("heatmap"),T=w.role==="Admin"||w.role==="Manager",L=c.useMemo(()=>["all",...new Set(n.map(s=>s.category))],[]),f=c.useMemo(()=>b==="all"?n:n.filter(s=>s.category===b),[b]),N=s=>s===0?"bg-bg-secondary dark:bg-dark-card border border-border-light":s===1?"bg-status-error/10 border border-status-error/20":s===2?"bg-status-warning/10 border border-status-warning/20":s===3?"bg-status-info/10 border border-status-info/20":s===4?"bg-action-secondary/10 border border-action-secondary/20":"bg-status-success/10 border border-status-success/20",u=s=>["None","Beginner","Basic","Intermediate","Advanced","Expert"][s]||"Unknown",M=s=>{const r=x.map(a=>{var t;return((t=a.skills.find(d=>d.skillId===s))==null?void 0:t.proficiency)||0});return r.reduce((a,t)=>a+t,0)/r.length},h=c.useMemo(()=>{const s=n.filter(a=>a.criticalLevel==="critical"),r=[];return s.forEach(a=>{const d=M(a.id),g=4-d;if(g>.5){const P=x.filter(k=>{const z=k.skills.find(F=>F.skillId===a.id);return!z||z.proficiency<4}).map(k=>k.memberName);r.push({skillId:a.id,skillName:a.name,requiredLevel:4,teamAverage:parseFloat(d.toFixed(1)),gap:parseFloat(g.toFixed(1)),affectedMembers:P})}}),r.sort((a,t)=>t.gap-a.gap)},[]),v=c.useMemo(()=>{let s=0,r=0,a=0,t=0;return x.forEach(d=>{d.skills.forEach(g=>{s+=g.proficiency,r++,g.proficiency>0&&(t++,g.verified&&a++)})}),{proficiency:(s/r*20).toFixed(0),verified:a,total:t}},[]);return T?e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{items:[{label:"Team"},{label:"Skill Matrix"}],setActiveView:C}),e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-action-primary via-action-secondary to-focus-ring p-8 text-text-inverse shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(i,{name:"grid-3x3",size:32}),e.jsx("h1",{className:"text-2xl font-bold",children:"Team Skill Matrix"})]}),e.jsx("p",{className:"text-white/80 mb-6",children:"Visualize and manage your team's skills and competencies"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:x.length}),e.jsx("div",{className:"text-sm text-white/80",children:"Team Members"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:n.length}),e.jsx("div",{className:"text-sm text-white/80",children:"Skills Tracked"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[v.proficiency,"%"]}),e.jsx("div",{className:"text-sm text-white/80",children:"Team Proficiency"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:h.length}),e.jsx("div",{className:"text-sm text-white/80",children:"Skill Gaps"})]})]})]}),e.jsx("div",{className:"absolute -right-10 -bottom-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"})]}),e.jsx("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[{id:"matrix",label:"Skill Matrix",icon:"grid-3x3"},{id:"gaps",label:"Skill Gaps",icon:"alert-triangle"},{id:"development",label:"Development Plans",icon:"trending-up"}].map(s=>e.jsxs("button",{onClick:()=>A(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${p===s.id?"border-action-primary text-action-primary":"border-transparent text-text-tertiary hover:text-text-primary dark:text-dark-text-secondary"}`,children:[e.jsx(i,{name:s.icon,size:18}),s.label]},s.id))}),p==="matrix"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("div",{className:"flex gap-2",children:L.map(s=>e.jsx("button",{onClick:()=>I(s),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${b===s?"bg-action-primary/10 text-action-primary border border-action-primary/20":"bg-bg-secondary text-text-secondary hover:bg-border-light dark:bg-dark-card dark:text-dark-text-secondary"}`,children:s==="all"?"All Categories":s},s))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:j==="heatmap"?"primary":"secondary",size:"sm",onClick:()=>S("heatmap"),children:[e.jsx(i,{name:"grid-3x3",size:16,className:"mr-1"}),"Heatmap"]}),e.jsxs(m,{variant:j==="list"?"primary":"secondary",size:"sm",onClick:()=>S("list"),children:[e.jsx(i,{name:"list",size:16,className:"mr-1"}),"List"]})]})]}),j==="heatmap"&&e.jsx(l,{variant:"bordered",className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"p-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400 sticky left-0 bg-white dark:bg-gray-900 z-10",children:"Team Member"}),f.map(s=>e.jsx("th",{className:"p-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400",title:s.description,children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{children:s.name}),s.criticalLevel==="critical"&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500",title:"Critical skill"})]})},s.id))]})}),e.jsxs("tbody",{children:[x.map(s=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer",onClick:()=>y(s),children:[e.jsx("td",{className:"p-3 sticky left-0 bg-white dark:bg-gray-900 z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-action-primary to-action-secondary flex items-center justify-center text-text-inverse text-sm font-medium",children:s.memberName.split(" ").map(r=>r[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s.memberName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.memberTitle})]})]})}),f.map(r=>{const a=s.skills.find(d=>d.skillId===r.id),t=(a==null?void 0:a.proficiency)||0;return e.jsx("td",{className:"p-2 text-center",children:e.jsxs("div",{className:`w-10 h-10 mx-auto rounded-lg flex items-center justify-center ${N(t)} transition-colors`,title:`${r.name}: ${u(t)}`,children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),(a==null?void 0:a.verified)&&e.jsx(i,{name:"check-circle",size:10,className:"absolute -top-1 -right-1 text-green-500"})]})},r.id)})]},s.memberId)),e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("td",{className:"p-3 sticky left-0 bg-gray-50 dark:bg-gray-800/50 z-10",children:e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Team Average"})}),f.map(s=>{const r=M(s.id);return e.jsx("td",{className:"p-2 text-center",children:e.jsx("div",{className:`w-10 h-10 mx-auto rounded-lg flex items-center justify-center ${N(Math.round(r))} transition-colors`,children:e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r.toFixed(1)})})},s.id)})]})]})]})}),j==="list"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>e.jsxs(l,{variant:"bordered",className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>y(s),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-action-primary to-action-secondary flex items-center justify-center text-text-inverse font-medium",children:s.memberName.split(" ").map(r=>r[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:s.memberName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.memberTitle})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between text-sm",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Top Skills"})}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.skills.filter(r=>r.proficiency>=4).slice(0,5).map(r=>{const a=n.find(t=>t.id===r.skillId);return e.jsx("span",{className:"px-2 py-1 bg-action-primary/10 text-action-primary dark:text-action-primary rounded text-xs border border-action-primary/20",children:a==null?void 0:a.name},r.skillId)})}),e.jsx("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[s.skills.filter(r=>r.verified).length," verified skills"]}),e.jsxs("span",{children:["Avg:"," ",(s.skills.reduce((r,a)=>r+a.proficiency,0)/s.skills.length).toFixed(1)]})]})})]})]},s.memberId))}),e.jsxs(l,{variant:"bordered",className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Proficiency Legend"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[0,1,2,3,4,5].map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded ${N(s)}`}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s," - ",u(s)]})]},s))})]})]}),p==="gaps"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{variant:"bordered",className:"p-4 border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx(i,{name:"alert-circle",size:20,className:"text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.filter(s=>s.gap>2).length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Critical Gaps"})]})]})}),e.jsx(l,{variant:"bordered",className:"p-4 border-amber-200 dark:border-amber-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(i,{name:"alert-triangle",size:20,className:"text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.filter(s=>s.gap>1&&s.gap<=2).length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Moderate Gaps"})]})]})}),e.jsx(l,{variant:"bordered",className:"p-4 border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(i,{name:"check-circle",size:20,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[v.verified,"/",v.total]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Verified Skills"})]})]})})]}),e.jsxs(l,{variant:"glass",className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Critical Skill Gaps"}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(i,{name:"check-circle",size:48,className:"mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"No critical skill gaps identified!"})]}):e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:s.skillName}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.affectedMembers.length," team member(s) below required level"]})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.gap>2?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:["Gap: ",s.gap]})]}),e.jsx("div",{className:"flex items-center gap-4 mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsxs("span",{children:["Team Average: ",s.teamAverage]}),e.jsxs("span",{children:["Required: ",s.requiredLevel]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-violet-500 rounded-full",style:{width:`${s.teamAverage/s.requiredLevel*100}%`}})})]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.affectedMembers.map(r=>e.jsx("span",{className:"px-2 py-1 bg-white dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:r},r))})]},s.skillId))})]}),e.jsx(l,{variant:"bordered",className:"p-6 bg-gradient-to-r from-bg-secondary to-bg-primary dark:from-dark-card dark:to-dark-bg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-action-secondary/10 dark:bg-action-secondary/20 flex items-center justify-center",children:e.jsx(i,{name:"lightbulb",size:20,className:"text-action-secondary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"AI Recommendations"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"• Consider enrolling Maria Garcia and James Wilson in AWS certification training"}),e.jsx("li",{children:"• System Design mentorship program would benefit 3 team members"}),e.jsx("li",{children:"• Cross-training between Emily Chen (DevOps) and frontend team could close multiple gaps"})]}),e.jsxs(m,{variant:"secondary",size:"sm",className:"mt-4",children:[e.jsx(i,{name:"sparkles",size:16,className:"mr-2"}),"Generate Development Plan"]})]})]})})]}),p==="development"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Development Plans"}),e.jsxs(m,{children:[e.jsx(i,{name:"plus",size:18,className:"mr-2"}),"Create Plan"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.slice(0,4).map(s=>e.jsxs(l,{variant:"bordered",className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-action-primary to-action-secondary flex items-center justify-center text-text-inverse font-medium",children:s.memberName.split(" ").map(r=>r[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:s.memberName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.memberTitle})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Current Focus"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AWS Fundamentals"})]}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded text-xs",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Next Milestone"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"System Design Workshop"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Mar 2024"})]})]}),e.jsx(m,{variant:"secondary",className:"w-full mt-4",children:"View Full Plan"})]},s.memberId))})]}),o&&e.jsx($,{isOpen:!0,onClose:()=>y(null),title:o.memberName,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center text-white text-lg font-medium",children:o.memberName.split(" ").map(s=>s[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:o.memberName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.memberTitle})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Skills Assessment"}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:o.skills.sort((s,r)=>r.proficiency-s.proficiency).map(s=>{const r=n.find(a=>a.id===s.skillId);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:r==null?void 0:r.name}),s.verified&&e.jsx(i,{name:"check-circle",size:14,className:"text-green-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(a=>e.jsx("div",{className:`w-4 h-4 rounded ${a<=s.proficiency?"bg-violet-500":"bg-gray-200 dark:bg-gray-700"}`},a))}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:u(s.proficiency)})]})]},s.skillId)})})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(m,{variant:"secondary",className:"flex-1",children:[e.jsx(i,{name:"edit",size:16,className:"mr-2"}),"Edit Skills"]}),e.jsxs(m,{className:"flex-1",children:[e.jsx(i,{name:"file-text",size:16,className:"mr-2"}),"Development Plan"]})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(l,{variant:"bordered",className:"p-8 text-center max-w-md",children:[e.jsx(i,{name:"lock",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Skill Matrix is only available to managers and administrators."})]})})};export{D as SkillMatrix,D as default};
