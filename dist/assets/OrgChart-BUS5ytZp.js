import{u as $,A as z,r as c,j as e,E as B,B as g,C as x,S as H}from"./index-jXBNcpIP.js";import{M as V}from"./Modal-DwonlL4D.js";const _=j=>{const n=j.map(a=>({id:a.id,name:a.name,title:a.title||"Team Member",avatar:a.avatarUrl,department:a.department||"Staff",email:a.email,phone:a.phone,reportsTo:a.managerId,directReports:[],level:0}));n.forEach(a=>{if(a.reportsTo){const l=n.find(i=>i.id===a.reportsTo);l&&l.directReports.push(a.id)}});const p=(a,l=new Set)=>{if(l.has(a))return 0;l.add(a);const i=n.find(r=>r.id===a);return!i||!i.reportsTo?0:1+p(i.reportsTo,l)};return n.forEach(a=>{a.level=p(a.id)}),n},I=({user:j,setActiveView:n})=>{var E,T,L;const{config:p}=$(),{users:a}=z(),[l,i]=c.useState(""),[r,v]=c.useState(null),[D,k]=c.useState(!1),[b,N]=c.useState("chart"),d=c.useMemo(()=>_(a),[a]),[y,O]=c.useState(()=>{const t=d.filter(s=>s.level===0).map(s=>s.id);return new Set(t)}),w=l?d.filter(t=>t.name.toLowerCase().includes(l.toLowerCase())||t.title.toLowerCase().includes(l.toLowerCase())||t.department.toLowerCase().includes(l.toLowerCase())):d,A=t=>{const s=new Set(y);s.has(t)?s.delete(t):s.add(t),O(s)},C=t=>{v(t),k(!0)},m=t=>d.find(s=>s.id===t),R=t=>d.filter(s=>s.reportsTo===t),f={totalEmployees:d.length,departments:new Set(d.map(t=>t.department)).size,levels:d.length>0?Math.max(...d.map(t=>t.level))+1:0},u=t=>({Executive:"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300",Engineering:"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",Product:"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300",Design:"border-pink-500 bg-pink-50 dark:bg-pink-900/20 text-pink-700 dark:text-pink-300",People:"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300",HR:"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"})[t]||"border-gray-200 bg-gray-50 dark:bg-slate-800 text-gray-700 dark:text-slate-300",S=({node:t,showChildren:s=!0})=>{const h=R(t.id),M=h.length>0,P=y.has(t.id);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`relative p-4 bg-white dark:bg-slate-800 rounded-xl border-2 ${u(t.department)} shadow-sm hover:shadow-md transition-all cursor-pointer min-w-48`,onClick:()=>C(t),children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-xl font-bold mb-2 shadow-sm overflow-hidden border-2 border-white dark:border-slate-700",children:t.avatar?e.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):t.name.split(" ").map(o=>o[0]).join("")}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-0.5",children:t.title})]}),M&&s&&e.jsx("button",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full flex items-center justify-center text-xs font-bold shadow-md transition-colors border-2 border-white dark:border-slate-800",onClick:o=>{o.stopPropagation(),A(t.id)},children:P?"âˆ’":"+"})]}),s&&M&&P&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-0.5 h-6 bg-gray-300 dark:bg-slate-600"}),e.jsx("div",{className:"flex gap-6 pt-2",children:h.map(o=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(S,{node:o,showChildren:!0})},o.id))})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl text-white",children:e.jsx(B,{className:"w-6 h-6"})}),"Organization Chart"]}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-1",children:"Browse the company hierarchy and direct reporting lines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-xl p-1 shadow-inner",children:[e.jsx("button",{onClick:()=>N("chart"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${b==="chart"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Chart"}),e.jsx("button",{onClick:()=>N("list"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${b==="list"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-white"}`,children:"List"})]}),e.jsx(g,{variant:"secondary",children:"Export PDF"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(x,{variant:"glass",padding:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.totalEmployees}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider font-semibold",children:"Total Staff"})]})}),e.jsx(x,{variant:"glass",padding:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.departments}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider font-semibold",children:"Departments"})]})}),e.jsx(x,{variant:"glass",padding:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.levels}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider font-semibold",children:"Hierarchy Depth"})]})})]}),e.jsx(x,{variant:"bordered",padding:"md",children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search by name, title, or department...",value:l,onChange:t=>i(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-slate-800/50 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 outline-none focus:ring-2 focus:ring-indigo-500 transition-all border border-gray-200 dark:border-slate-700"})]})}),b==="chart"&&!l?e.jsx(x,{variant:"bordered",className:"overflow-x-auto min-h-[500px] bg-slate-50/50 dark:bg-slate-900/50",children:e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx("div",{className:"flex gap-12",children:d.filter(t=>t.level===0).map(t=>e.jsx(S,{node:t},t.id))})})}):e.jsxs(x,{variant:"bordered",padding:"none",children:[e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:w.map(t=>{var s;return e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>C(t),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-gray-600 dark:text-slate-300 font-bold overflow-hidden",children:t.avatar?e.jsx("img",{src:t.avatar,alt:""}):t.name.split(" ").map(h=>h[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:t.title})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${u(t.department)}`,children:t.department}),e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Manager"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-slate-300 font-medium whitespace-nowrap",children:((s=m(t.reportsTo||""))==null?void 0:s.name)||"Top Level"})]})]})]},t.id)})}),w.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("span",{className:"text-4xl mb-4 block opacity-20",children:"ðŸ”"}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:"No team members match your search criteria"})]})]}),e.jsx(V,{isOpen:D,onClose:()=>k(!1),title:"Employee Details",size:"md",children:r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 text-3xl font-bold shadow-inner overflow-hidden mb-4 border-4 border-white dark:border-slate-800",children:r.avatar?e.jsx("img",{src:r.avatar,className:"w-full h-full object-cover",alt:""}):r.name.split(" ").map(t=>t[0]).join("")}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400 font-medium",children:r.title}),e.jsx("span",{className:`mt-2 px-3 py-1 text-xs font-bold rounded-full uppercase tracking-wider ${u(r.department)}`,children:r.department})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-slate-400",children:"Email Address"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:r.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-slate-400",children:"Level in Hierarchy"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:["Level ",r.level+1]})]})]}),r.reportsTo&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2 ml-1",children:"Reporting Line"}),e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-gray-100 dark:border-slate-700 rounded-xl flex items-center gap-3 shadow-sm",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-sm font-bold",children:(E=m(r.reportsTo))==null?void 0:E.name.split(" ").map(t=>t[0]).join("")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:(T=m(r.reportsTo))==null?void 0:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:(L=m(r.reportsTo))==null?void 0:L.title})]}),e.jsx(g,{size:"sm",variant:"secondary",onClick:()=>v(m(r.reportsTo)||null),children:"View"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100 dark:border-slate-800",children:[e.jsx(g,{variant:"secondary",className:"flex-1",children:"Send Message"}),e.jsx(g,{className:"flex-1",children:"Full Profile"})]})]})})]})};export{I as default};
