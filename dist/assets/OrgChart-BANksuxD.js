import{A as O,r as o,j as e,E as R,B as b,C as c,S as $}from"./index-BhnCGazT.js";import{M as z}from"./Modal-Bjrg86Tx.js";const B=m=>{const r=m.map(a=>({id:a.id,name:a.name,title:a.title||"Team Member",avatar:a.avatarUrl,department:a.department||"Staff",email:a.email,phone:a.phone,reportsTo:a.managerId,directReports:[],level:0}));r.forEach(a=>{if(a.reportsTo){const d=r.find(i=>i.id===a.reportsTo);d&&d.directReports.push(a.id)}});const h=(a,d=new Set)=>{if(d.has(a))return 0;d.add(a);const i=r.find(g=>g.id===a);return!i||!i.reportsTo?0:1+h(i.reportsTo,d)};return r.forEach(a=>{a.level=h(a.id)}),r},F=()=>{var C,S,E;const{users:m}=O(),[r,h]=o.useState(""),[a,d]=o.useState(null),[i,g]=o.useState(!1),[f,v]=o.useState("chart"),l=o.useMemo(()=>B(m),[m]),[k,M]=o.useState(()=>{const t=l.filter(s=>s.level===0).map(s=>s.id);return new Set(t)}),N=r?l.filter(t=>t.name.toLowerCase().includes(r.toLowerCase())||t.title.toLowerCase().includes(r.toLowerCase())||t.department.toLowerCase().includes(r.toLowerCase())):l,P=t=>{const s=new Set(k);s.has(t)?s.delete(t):s.add(t),M(s)},y=t=>{d(t),g(!0)},x=t=>l.find(s=>s.id===t),D=t=>l.filter(s=>s.reportsTo===t),u={totalEmployees:l.length,departments:new Set(l.map(t=>t.department)).size,levels:l.length>0?Math.max(...l.map(t=>t.level))+1:0},j=t=>({Executive:"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300",Engineering:"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",Product:"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300",Design:"border-pink-500 bg-pink-50 dark:bg-pink-900/20 text-pink-700 dark:text-pink-300",People:"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300",HR:"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"})[t]||"border-gray-200 bg-gray-50 dark:bg-slate-800 text-gray-700 dark:text-slate-300",w=({node:t,showChildren:s=!0})=>{const p=D(t.id),T=p.length>0,L=k.has(t.id);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`relative p-4 bg-white dark:bg-slate-800 rounded-xl border-2 ${j(t.department)} shadow-sm hover:shadow-md transition-all cursor-pointer min-w-48`,onClick:()=>y(t),children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-xl font-bold mb-2 shadow-sm overflow-hidden border-2 border-white dark:border-slate-700",children:t.avatar?e.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):t.name.split(" ").map(n=>n[0]).join("")}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-0.5",children:t.title})]}),T&&s&&e.jsx("button",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full flex items-center justify-center text-xs font-bold shadow-md transition-colors border-2 border-white dark:border-slate-800",onClick:n=>{n.stopPropagation(),P(t.id)},children:L?"âˆ’":"+"})]}),s&&T&&L&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-0.5 h-6 bg-gray-300 dark:bg-slate-600"}),e.jsx("div",{className:"flex gap-6 pt-2",children:p.map(n=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(w,{node:n,showChildren:!0})},n.id))})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl text-white",children:e.jsx(R,{className:"w-6 h-6"})}),"Organization Chart"]}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-1",children:"Browse the company hierarchy and direct reporting lines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-xl p-1 shadow-inner",children:[e.jsx("button",{onClick:()=>v("chart"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${f==="chart"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Chart"}),e.jsx("button",{onClick:()=>v("list"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${f==="list"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-white"}`,children:"List"})]}),e.jsx(b,{variant:"secondary",children:"Export PDF"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(c,{variant:"glass",padding:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u.totalEmployees}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider font-semibold",children:"Total Staff"})]})}),e.jsx(c,{variant:"glass",padding:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u.departments}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider font-semibold",children:"Departments"})]})}),e.jsx(c,{variant:"glass",padding:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u.levels}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider font-semibold",children:"Hierarchy Depth"})]})})]}),e.jsx(c,{variant:"bordered",padding:"md",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search by name, title, or department...",value:r,onChange:t=>h(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-slate-800/50 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 outline-none focus:ring-2 focus:ring-indigo-500 transition-all border border-gray-200 dark:border-slate-700"})]})}),f==="chart"&&!r?e.jsx(c,{variant:"bordered",className:"overflow-x-auto min-h-[500px] bg-slate-50/50 dark:bg-slate-900/50",children:e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx("div",{className:"flex gap-12",children:l.filter(t=>t.level===0).map(t=>e.jsx(w,{node:t},t.id))})})}):e.jsxs(c,{variant:"bordered",padding:"none",children:[e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:N.map(t=>{var s;return e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>y(t),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-gray-600 dark:text-slate-300 font-bold overflow-hidden",children:t.avatar?e.jsx("img",{src:t.avatar,alt:""}):t.name.split(" ").map(p=>p[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:t.title})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${j(t.department)}`,children:t.department}),e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Manager"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-slate-300 font-medium whitespace-nowrap",children:((s=x(t.reportsTo||""))==null?void 0:s.name)||"Top Level"})]})]})]},t.id)})}),N.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("span",{className:"text-4xl mb-4 block opacity-20",children:"ðŸ”"}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:"No team members match your search criteria"})]})]}),e.jsx(z,{isOpen:i,onClose:()=>g(!1),title:"Employee Details",size:"md",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 text-3xl font-bold shadow-inner overflow-hidden mb-4 border-4 border-white dark:border-slate-800",children:a.avatar?e.jsx("img",{src:a.avatar,className:"w-full h-full object-cover",alt:""}):a.name.split(" ").map(t=>t[0]).join("")}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.name}),e.jsx("p",{className:"text-gray-500 dark:text-slate-400 font-medium",children:a.title}),e.jsx("span",{className:`mt-2 px-3 py-1 text-xs font-bold rounded-full uppercase tracking-wider ${j(a.department)}`,children:a.department})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-slate-400",children:"Email Address"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:a.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-slate-400",children:"Level in Hierarchy"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:["Level ",a.level+1]})]})]}),a.reportsTo&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2 ml-1",children:"Reporting Line"}),e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-gray-100 dark:border-slate-700 rounded-xl flex items-center gap-3 shadow-sm",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-sm font-bold",children:(C=x(a.reportsTo))==null?void 0:C.name.split(" ").map(t=>t[0]).join("")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:(S=x(a.reportsTo))==null?void 0:S.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:(E=x(a.reportsTo))==null?void 0:E.title})]}),e.jsx(b,{size:"sm",variant:"secondary",onClick:()=>d(x(a.reportsTo)||null),children:"View"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100 dark:border-slate-800",children:[e.jsx(b,{variant:"secondary",className:"flex-1",children:"Send Message"}),e.jsx(b,{className:"flex-1",children:"Full Profile"})]})]})})]})};export{F as default};
